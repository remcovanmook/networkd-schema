{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/remcovanmook/networkd-schema/main/schemas/v244/systemd.networkd.conf.schema.json",
  "title": "Systemd networkd.conf Configuration (v244)",
  "type": "object",
  "additionalProperties": false,
  "definitions": {
    "mac_address": {
      "type": "string",
      "description": "MAC Address (Hex separated by colons or hyphens)",
      "pattern": "^([0-9a-fA-F]{2}[:-]){5}([0-9a-fA-F]{2})$"
    },
    "ipv4_address": {
      "type": "string",
      "description": "IPv4 Address",
      "format": "ipv4"
    },
    "ipv6_address": {
      "type": "string",
      "description": "IPv6 Address",
      "format": "ipv6"
    },
    "ip_address": {
      "description": "IPv4 or IPv6 Address",
      "oneOf": [
        {
          "$ref": "#/definitions/ipv4_address"
        },
        {
          "$ref": "#/definitions/ipv6_address"
        }
      ]
    },
    "ipv4_prefix": {
      "type": "string",
      "description": "IPv4 Address with Prefix Length (CIDR), e.g., 192.168.1.1/24",
      "pattern": "^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\/(3[0-2]|[1-2]?[0-9]|[0-9])$"
    },
    "ipv6_prefix": {
      "type": "string",
      "description": "IPv6 Address with Prefix Length (CIDR), e.g., 2001:db8::1/64",
      "pattern": "^([0-9a-fA-F]{1,4}:){1,7}:?([0-9a-fA-F]{1,4}:?)*\\/(12[0-8]|1[0-1][0-9]|[1-9]?[0-9]|[0-9])$"
    },
    "ip_prefix": {
      "description": "IPv4 or IPv6 Prefix (CIDR)",
      "oneOf": [
        {
          "$ref": "#/definitions/ipv4_prefix"
        },
        {
          "$ref": "#/definitions/ipv6_prefix"
        }
      ]
    },
    "filename": {
      "type": "string",
      "description": "Filesystem path",
      "format": "uri-reference"
    },
    "seconds": {
      "type": "string",
      "pattern": "^[0-9]+(\\.[0-9]+)?(us|ms|s|min|h|d|w|M|y)?$",
      "description": "Time duration (e.g. 5s, 1min, 500ms)"
    },
    "bytes": {
      "description": "Size in bytes (Integer or String with suffix B, K, M, G, T, P, E)",
      "oneOf": [
        {
          "type": "integer",
          "minimum": 0
        },
        {
          "type": "string",
          "pattern": "^[0-9]+(\\s*[KMGTPE]i?B?)?$"
        }
      ]
    }
  },
  "properties": {
    "Network": {
      "type": "object",
      "description": "[Network] section configuration",
      "properties": {
        "SpeedMeter": {
          "type": "boolean",
          "default": false,
          "description": "If set to yes, then systemd-networkd measures the traffic of each interface, and networkctl status INTERFACE shows the measured speed. Defaults to no."
        },
        "SpeedMeterIntervalSec": {
          "allOf": [
            {
              "$ref": "#/definitions/seconds",
              "default": "10sec"
            }
          ],
          "description": "Specifies the time interval to calculate the traffic speed of each interface. If SpeedMeter=no, the value is ignored. Defaults to 10sec."
        }
      },
      "additionalProperties": false
    },
    "DHCP": {
      "oneOf": [
        {
          "type": "array",
          "items": {
            "type": "object",
            "description": "[DHCP] section configuration",
            "properties": {
              "DUIDType": {
                "oneOf": [
                  {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 65535
                  },
                  {
                    "type": "string"
                  }
                ],
                "description": "Specifies how the DUID should be generated. See RFC 3315 for a description of all the options. This , or one of the following string values: 'vendor' If 'DUIDType=vendor', then the DUID value will be generated using '43793' as the vendor identifier (systemd) and hashed contents of machine-id5. This is the default if DUIDType= is not specified. 'uuid' If 'DUIDType=uuid', and DUIDRawData= is not set, then the product UUID is used as a DUID value. If a system does not have valid product UUID, then an application-specific machine-id5 is used as a DUID value. About the application-specific machine ID, see sd_id128_get_machine_app_specific3. 'link-layer-time[:TIME]' 'link-layer' If 'link-layer-time' or 'link-layer' is specified, then the MAC address of the interface is used as a DUID value. The value 'link-layer-time' can take additional time value after a colon, e.g. 'link-layer-time:2018-01-23 12:34:56 UTC'. The default time value is '2000-01-01 00:00:00 UTC'. If 'DUIDType=vendor', then the DUID value will be generated using '43793' as the vendor identifier (systemd) and hashed contents of machine-id5. This is the default if DUIDType= is not specified. If 'DUIDType=uuid', and DUIDRawData= is not set, then the product UUID is used as a DUID value. If a system does not have valid product UUID, then an application-specific machine-id5 is used as a DUID value. About the application-specific machine ID, see sd_id128_get_machine_app_specific3. If 'link-layer-time' or 'link-layer' is specified, then the MAC address of the interface is used as a DUID value. The value 'link-layer-time' can take additional time value after a colon, e.g. 'link-layer-time:2018-01-23 12:34:56 UTC'. The default time value is '2000-01-01 00:00:00 UTC'. In all cases, DUIDRawData= can be used to override the actual DUID value that is used."
              },
              "DUIDRawData": {
                "type": "string",
                "description": "Specifies the DHCP DUID value as a single newline-terminated, hexadecimal string, with each byte separated by ':'. The DUID that is sent is composed of the DUID type specified by DUIDType= and the value configured here. The DUID value specified here overrides the DUID that systemd-networkd.service8 generates from the machine ID. To configure DUID per-network, see systemd.network5. The configured DHCP DUID should conform to the specification in RFC 3315, RFC 6355. To configure IAID, see systemd.network5. This specifies a 14 byte DUID, with the type DUID-EN ('00:02'), enterprise number 43793 ('00:00:ab:11'), and identifier value 'f9:2a:c2:77:29:f9:5c:00'."
              }
            },
            "additionalProperties": false
          }
        },
        {
          "type": "object",
          "description": "[DHCP] section configuration",
          "properties": {
            "DUIDType": {
              "oneOf": [
                {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 65535
                },
                {
                  "type": "string"
                }
              ],
              "description": "Specifies how the DUID should be generated. See RFC 3315 for a description of all the options. This , or one of the following string values: 'vendor' If 'DUIDType=vendor', then the DUID value will be generated using '43793' as the vendor identifier (systemd) and hashed contents of machine-id5. This is the default if DUIDType= is not specified. 'uuid' If 'DUIDType=uuid', and DUIDRawData= is not set, then the product UUID is used as a DUID value. If a system does not have valid product UUID, then an application-specific machine-id5 is used as a DUID value. About the application-specific machine ID, see sd_id128_get_machine_app_specific3. 'link-layer-time[:TIME]' 'link-layer' If 'link-layer-time' or 'link-layer' is specified, then the MAC address of the interface is used as a DUID value. The value 'link-layer-time' can take additional time value after a colon, e.g. 'link-layer-time:2018-01-23 12:34:56 UTC'. The default time value is '2000-01-01 00:00:00 UTC'. If 'DUIDType=vendor', then the DUID value will be generated using '43793' as the vendor identifier (systemd) and hashed contents of machine-id5. This is the default if DUIDType= is not specified. If 'DUIDType=uuid', and DUIDRawData= is not set, then the product UUID is used as a DUID value. If a system does not have valid product UUID, then an application-specific machine-id5 is used as a DUID value. About the application-specific machine ID, see sd_id128_get_machine_app_specific3. If 'link-layer-time' or 'link-layer' is specified, then the MAC address of the interface is used as a DUID value. The value 'link-layer-time' can take additional time value after a colon, e.g. 'link-layer-time:2018-01-23 12:34:56 UTC'. The default time value is '2000-01-01 00:00:00 UTC'. In all cases, DUIDRawData= can be used to override the actual DUID value that is used."
            },
            "DUIDRawData": {
              "type": "string",
              "description": "Specifies the DHCP DUID value as a single newline-terminated, hexadecimal string, with each byte separated by ':'. The DUID that is sent is composed of the DUID type specified by DUIDType= and the value configured here. The DUID value specified here overrides the DUID that systemd-networkd.service8 generates from the machine ID. To configure DUID per-network, see systemd.network5. The configured DHCP DUID should conform to the specification in RFC 3315, RFC 6355. To configure IAID, see systemd.network5. This specifies a 14 byte DUID, with the type DUID-EN ('00:02'), enterprise number 43793 ('00:00:ab:11'), and identifier value 'f9:2a:c2:77:29:f9:5c:00'."
            }
          },
          "additionalProperties": false
        }
      ],
      "description": "[DHCP] configuration (Can be repeated)"
    }
  }
}